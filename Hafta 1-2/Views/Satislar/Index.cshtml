@using WebLessons.Models
@model List<SATISLAR>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<h2>Index</h2>
@if (User.IsInRole("Admin"))
{
    <table id="tbl1" class="table table-bordered">
        <thead>
            <tr>

                <th>Satis ID</th>
                <th>Urun  </th>
                <th>Musteri Adı</th>
                <th>Musteri Soyadı</th>
                <th>Urun Adet </th>
                <th>Urun Fiyat</th>

                <th>Sil</th>
                @*<th>Guncelle </th>*@

            </tr>
        </thead>

        <tbody>
            @foreach (var satis in Model)
            {
                <tr>
                    <td>
                        @satis.SATISID
                    </td>
                    @if (satis.URUN == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                           // üründen gelen kategori id boş ise
                    {
                        <td>Ürün belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.URUNLER.URUNAD</td>
                        // kategorinin adını yazdır
                    }
                    @if (satis.MUSTERI == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                              // üründen gelen kategori id boş ise
                    {
                        <td>Müşteri belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.MUSTERILER.MUSTERIAD</td>
                        // kategorinin adını yazdır
                    }
                    @if (satis.MUSTERI == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                              // üründen gelen kategori id boş ise
                    {
                        <td>Müşteri Soyadı belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.MUSTERILER.MUSTERISOYAD</td>
                        // kategorinin adını yazdır
                    }
                    <td>
                        @satis.ADET
                    </td>
                    <td>
                        @satis.FIYAT
                    </td>

                    <td>
                        <a href="/Satislar/Sil/@satis.SATISID" class="btn btn-danger">Sil</a>
                    </td>
                    @*<td>
                            <a href="/Satislar/SatisGetir/@satis.URUNID" class="btn btn-success">Guncelle</a>
                        </td>*@
                </tr>
            }
        </tbody>

    </table>
    <a href="/Satislar/YeniSatislar/" class="btn btn-primary">Yeni Ürün</a>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>

    <script>
        $('#tbl1').DataTable();
    </script>

}

else if (User.IsInRole("User"))
{
    <table id="tbl1" class="table table-bordered">
        <thead>
            <tr>

                <th>Satis ID</th>
                <th>Urun  </th>
                <th>Musteri Adı</th>
                <th>Musteri Soyadı</th>
                <th>Urun Adet </th>
                <th>Urun Fiyat</th>

        
                @*<th>Guncelle </th>*@

            </tr>
        </thead>

        <tbody>
            @foreach (var satis in Model)
            {
                <tr>
                    <td>
                        @satis.SATISID
                    </td>
                    @if (satis.URUN == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                           // üründen gelen kategori id boş ise
                    {
                        <td>Ürün belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.URUNLER.URUNAD</td>
                        // kategorinin adını yazdır
                    }
                    @if (satis.MUSTERI == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                              // üründen gelen kategori id boş ise
                    {
                        <td>Müşteri belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.MUSTERILER.MUSTERIAD</td>
                        // kategorinin adını yazdır
                    }
                    @if (satis.MUSTERI == null)// null değerlerini silseydikte çalışırdı ama bu daha sağlıklı
                                              // üründen gelen kategori id boş ise
                    {
                        <td>Müşteri Soyadı belirtilmemiş</td>
                        // bunu yazdır
                    }
                    else
                    //eğer bir id değeri geliyorsa
                    {
                        <td>@satis.MUSTERILER.MUSTERISOYAD</td>
                        // kategorinin adını yazdır
                    }
                    <td>
                        @satis.ADET
                    </td>
                    <td>
                        @satis.FIYAT
                    </td>

                    @*<td>
                            <a href="/Satislar/SatisGetir/@satis.URUNID" class="btn btn-success">Guncelle</a>
                        </td>*@
                </tr>
            }
        </tbody>

    </table>
    <a href="/Satislar/YeniSatislar/" class="btn btn-primary">Yeni Ürün</a>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    <link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>

    <script>
        $('#tbl1').DataTable();
    </script>

}
